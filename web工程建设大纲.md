## web项目工程化建设
> 团队发展中，为多个项目建立统一的工程能力/工具体系等具有较大价值，以下记录一些工程建设可以探索的方向，为自己后续在团队中做工程化相关工作提供参考。
### 大概划分为三个方面
1. 脚手架/搭建工程 
3. 开发/运行时
4. 构建/发布/流水线
### 脚手架/运行时
1. 可针对构建配置做封装，类似dva等库做的工作，将对webpack/rollup等库进行封装，设计出自己的配置文件，假设工具名为tdev, 即tdev.config.js
2. 即可提供对应npm script命令: att start 和 att build
3. 以webpack为例，工具可将webpack一些业务标准化的默认配置进行封装，对外暴露一小部分新配置；同时增加插件系统；
```
{
  output: '',
  // 参考dva
  dev: {},
  build: {},
  // 插件支持绝对路径/npm包
  plugins: []
}
```
4. 关于插件
可以利用插件更改构建打包过程，影响生成产物等;
比如每个插件都有这样的参数：
```
{
  command: 'start' | build,
  commandArgs: Record<>,
  pkgConfig: {},
  tdevConfig: {},
  // 暴露方法给插件，允许插件用webpackChain方式修改webpack配置！
  modifyWebpackChain: {}
}
```
5. tdev new
模版式创建新项目，可选择使用哪些服务，比如api请求服务、埋点服务、国际化服务等，自动化创建初始化配置文件夹等（用户输入配置后生成）。
6. 其他
（1）支持lint检查
（2）css modules服务支持
（3）less等配置
（4）通用颜色less配置是否封装
（5）提供特定服务的命令（对子服务进行封装，一般是团队内其他服务用在这里）
如tdev api pull、tdev i18n:d等

7. 脚手架的各阶段允许配置类似webpack的插件的能力，在某个阶段自定义行为 

### 构建/发布
1. 构建优化
> 构建优化上可以做很多事情，比如通过webpack的缓存/并行loader加快构建速度，还有esbuild加快编译速度（esbuild-loader）。
2. 构建分析
可以提供构建耗时、产物大小、产物安全检查等分析能力；
3. 发布
（1）发布流水线化，平台化（接入平台方式标准化？），降低发布成本等。
（2）如果是脚本式构建，可以考虑配置文件化。
> 总之就是结合业务特点，针对业务做统一性优化。




